<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/uploadQA.css">
    <title>Quiz Display</title>
</head>

<body>

    <header>
        <div class="logo">
            <%=displayQuestions.courseTitle%> Quiz
        </div>
    </header>

    <section class="form-section">
        <!-- action="/api/v1/answers" method="post" -->
        <form id="quizDisplayForm"> 
            <!-- <div class="question"> -->
                <label>Question 1: <%=displayQuestions.question0%>
                <input type="radio" name="q0" value="Option 1">A. <%=displayQuestions.q0option1%></label>
                <input type="radio" name="q0" value="Option 2"> B. <%=displayQuestions.q0option2%>
                <input type="radio" name="q0" value="Option 3"> C. <%=displayQuestions.q0option3%>
                <input type="radio" name="q0" value="Option 4"> D. <%=displayQuestions.q0option4%>
                <input type="radio" name="q0" value="Option 5"> E. <%=displayQuestions.q0option5%>
            </label>
            <!-- </div> -->
              <br>
            <!-- <div class="question"> -->
                <label>Question 2: <%=displayQuestions.question1%>
                    <input type="radio" name="q1" value="Option 1"> A. <%=displayQuestions.q1option1%>
                    <input type="radio" name="q1" value="Option 2"> B. <%=displayQuestions.q1option2%>
                    <input type="radio" name="q1" value="Option 3"> C. <%=displayQuestions.q1option3%>
                    <input type="radio" name="q1" value="Option 4"> D. <%=displayQuestions.q1option4%>
                    <input type="radio" name="q1" value="Option 5"> E. <%=displayQuestions.q1option5%>
                </label>
            <!-- </div> -->

            <!-- Add more questions as needed -->

            <button type="submit">Submit Answers</button>
        </form>
    </section>


    <script>
        const form = document.querySelector('form');
         function submitForm() {
              // Create an object to store the selected values
            let selectedValues = {};

            // Get all radio buttons in the form
            const radioButtons = document.querySelectorAll('input[type="radio"]');

            // Iterate through the radio buttons
            radioButtons.forEach(radioButton => {
                selectedValues[radioButton.name] = radioButton.checked ? radioButton.value : (selectedValues[radioButton.name] || "") ;
            });


            // Prevent the form from actually submitting
             return selectedValues;
        };

        form.addEventListener("submit", async () => {
            let result = await submitForm();
            console.log(result);
             let res = await fetch("/api/v1/answers", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify(result)
            });
            let data = await res.json();
            window.location.href = data.redirect;
            console.log(data)
        })

    </script>
</body>

</html>